<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
   <head>
      <title th:utext="${title}"></title>
      
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/>
	  <link rel="stylesheet" href="css/updater.css"/>
	  <link href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" rel="stylesheet">
	  
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	  <script src="js/bootstrap.bundle.min.js"></script>
   </head>
    
   <body>
    	<div th:if="${#request.userPrincipal != null}">
			<th:block th:include="/_menu"></th:block>
		</div>
		
		
		<div th:if="${#request.userPrincipal == null}">
			<div class="container">
				<div class="d-flex justify-content-center h-100">
					<h2><span th:utext="${message}"></span></h2>
				</div>
				<br/>
				<div class="d-flex justify-content-center h-100">
					<div class="card">
						<div class="card-header">
							<h3>Sign In</h3>
							
						</div>
						<div class="card-body">
							<form name='f' th:action="@{/j_spring_security_check}" method='POST'>
								<div class="input-group form-group">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fa fa-user"></i></span>
									</div>
									<input type="text" class="form-control" placeholder="username" name='username'>
									
								</div>
								<div class="input-group form-group">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fa fa-key"></i></span>
									</div>
									<input type="password" class="form-control" placeholder="password" name='password'>
								</div>
								<div class="row align-items-center remember">
									<input type="checkbox" name="remember-me">Remember Me
								</div>
								<div class="form-group">
									<input type="submit" value="Login" class="btn float-right login_btn">
								</div>
							</form>
						</div>
						<div class="card-footer">
							<div class="d-flex justify-content-center" th:if="${#request.getParameter('error') == 'true'}">
								<div th:if="${#request.getParameter('error') == 'true'}" style="color:red;margin:10px 0px;">
							         Login Failed!!!<br />
							         Reason :
							         <span th:if="${#session!= null and #session.getAttribute('SPRING_SECURITY_LAST_EXCEPTION') != null}"
							            th:utext="${#session.getAttribute('SPRING_SECURITY_LAST_EXCEPTION').message}">
							                Static summary
							         </span>
						        </div>
						        <br/>
							</div>
							
							<div class="d-flex justify-content-center">
								<a href="#">Forgot your password?</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		
		</div>
      
		
		<div th:if="${#request.userPrincipal != null}">
			<div class="container" style="text-align: center;margin: auto;width: 70%;">
				<div style="margin: auto;text-align: center;width: 90%;">
					<h1>Welcome <span th:utext="${#request.userPrincipal.name}"></span></h1>
				</div>
				
			</div>
	    </div>
		
      
       
   </body>
</html>